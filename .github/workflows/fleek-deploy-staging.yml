name: ⚡️ Deploy Dashboard (Staging)

on:
  workflow_dispatch:
  push:
    branches:
      - develop

jobs:
  deploy-to-staging:
    uses: ./.github/workflows/fleek-deploy-common.yml
    with:
      environment: staging
      fleek_project_id: ${{ vars.FLEEK_PROJECT_ID }}
      fleek_slug: ${{ vars.FLEEK_SLUG }}
      github_source_repo: ${{ github.repository }}
      doppler_config: ${{ vars.DOPPLER_CONFIG }}
      doppler_project: ${{ vars.DOPPLER_PROJECT }}
    secrets:
      fleek_token: ${{ secrets.FLEEK_TOKEN }}
      doppler_token: ${{ secrets.DOPPLER_TOKEN }}
