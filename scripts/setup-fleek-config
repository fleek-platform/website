#!/bin/bash

if [[ -z "$1" || -z "$2" || -z "$3" ]]; then
  echo "ğŸ‘¹ Oops! Missing arguments required for slug, distDir and buildCommand."
  exit 1
fi

slug="$1"
distDir="$2"
buildCommand="$3"
fleekConfigPath="./fleek.config.json"

if ! jq -n "{
  \"sites\": [
    {
      \"slug\": \"$slug\",
      \"distDir\": \"$distDir\",
      \"buildCommand\": \"$buildCommand\"
    }
  ]
}" > "$fleekConfigPath"; then
  echo "ğŸ‘¹ Oops! Failed to set $fleekConfigPath for some reason..."
  exit 1
fi

echo "ğŸ” The $fleekConfigPath content is:"
cat "$fleekConfigPath"
echo

echo "âœ… Completed fleek config setup!"
